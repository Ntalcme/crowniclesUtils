<div class="card" id="dataLoadingCard">
    <h2>ğŸ“¦ Chargement des donnÃ©es</h2>
    <div class="form-group">
        <label>Branche GitHub</label>
        <div class="searchable-select-container">
            <input type="text" id="branchSearch" placeholder="Rechercher une branche..." autocomplete="off">
            <div class="dropdown-list" id="branchDropdown"></div>
        </div>
        <input type="hidden" id="selectedBranch" value="petexploration">
    </div>
    <button class="btn-simulate" id="loadButton">ğŸ”„ Charger les donnÃ©es des familiers</button>
    <div id="loadingStatus" style="margin-top: 15px; text-align: center;"></div>
</div>

<div class="tab-nav" id="tabNav" style="display: none;">
    <button class="tab-btn active" data-target="simulator">ğŸ§ª Simulateur</button>
    <button class="tab-btn" data-target="analyzer">ğŸ“ Analyseur</button>
</div>

<div class="tab-content active" id="tab-simulator">
    <div class="card" id="simulatorCard" style="display: none;">
        <h2>âš™ï¸ ParamÃ¨tres de l'expÃ©dition</h2>
        <div class="form-grid">
            <div class="form-group">
                <label>ğŸ¾ Familier</label>
                <div class="searchable-select-container">
                    <input type="text" id="petSearch" placeholder="Rechercher un familier..." autocomplete="off">
                    <div class="dropdown-list" id="petDropdown"></div>
                </div>
                <input type="hidden" id="selectedPetId" value="">
                <div id="selectedPetStats" class="stat-display" style="display: none;"></div>
            </div>
            <div class="form-group">
                <label>ğŸ’• Points d'amour (80-110)</label>
                <div class="slider-container">
                    <input type="range" id="lovePoints" min="80" max="110" value="80" aria-label="Points d'amour du familier">
                    <span class="slider-value" id="loveValue">80</span>
                </div>
                <small style="color: var(--text-secondary);">Minimum requis pour partir en expÃ©dition</small>
            </div>
            <div class="form-group">
                <label>â±ï¸ DurÃ©e de l'expÃ©dition (minutes)</label>
                <div class="slider-container">
                    <input type="range" id="duration" min="10" max="4320" value="120" step="10" aria-label="DurÃ©e de l'expÃ©dition en minutes">
                    <span class="slider-value" id="durationValue">2h</span>
                </div>
                <small style="color: var(--text-secondary);">10 min - 3 jours (4320 min)</small>
            </div>
            <div class="form-group">
                <label>âš ï¸ DangerositÃ© (0-100%)</label>
                <div class="slider-container">
                    <input type="range" id="riskRate" min="0" max="100" value="30" aria-label="DangerositÃ© de l'expÃ©dition">
                    <span class="slider-value" id="riskValue">30%</span>
                </div>
                <small id="riskCategory" style="color: var(--text-secondary);">CatÃ©gorie: Faible</small>
            </div>
            <div class="form-group">
                <label>ğŸ¯ DifficultÃ© du terrain (0-100)</label>
                <div class="slider-container">
                    <input type="range" id="difficulty" min="0" max="100" value="50" aria-label="DifficultÃ© du terrain">
                    <span class="slider-value" id="difficultyValue">50</span>
                </div>
                <small id="difficultyCategory" style="color: var(--text-secondary);">CatÃ©gorie: ModÃ©rÃ©e</small>
            </div>
            <div class="form-group">
                <label>ğŸ’ Taux de richesse (0.0-2.0)</label>
                <div class="slider-container">
                    <input type="range" id="wealthRate" min="0" max="200" value="100" aria-label="Taux de richesse de l'expÃ©dition">
                    <span class="slider-value" id="wealthValue">1.0</span>
                </div>
                <small id="wealthCategory" style="color: var(--text-secondary);">CatÃ©gorie: Modeste</small>
            </div>
            <div class="form-group">
                <label>ğŸ—ºï¸ Type d'expÃ©dition (lieu)</label>
                <div class="location-grid" id="locationGrid">
                    <div class="location-option selected" data-location="plains">
                        <span class="icon">ğŸŒ¾</span>
                        <span class="name">Plaines</span>
                    </div>
                    <div class="location-option" data-location="forest">
                        <span class="icon">ğŸŒ²</span>
                        <span class="name">ForÃªt</span>
                    </div>
                    <div class="location-option" data-location="mountain">
                        <span class="icon">â›°ï¸</span>
                        <span class="name">Montagne</span>
                    </div>
                    <div class="location-option" data-location="desert">
                        <span class="icon">ğŸœï¸</span>
                        <span class="name">DÃ©sert</span>
                    </div>
                    <div class="location-option" data-location="swamp">
                        <span class="icon">ğŸŒ¿</span>
                        <span class="name">Marais</span>
                    </div>
                    <div class="location-option" data-location="coast">
                        <span class="icon">ğŸ–ï¸</span>
                        <span class="name">CÃ´te</span>
                    </div>
                    <div class="location-option" data-location="ruins">
                        <span class="icon">ğŸ›ï¸</span>
                        <span class="name">Ruines</span>
                    </div>
                    <div class="location-option" data-location="cave">
                        <span class="icon">ğŸ•³ï¸</span>
                        <span class="name">Caverne</span>
                    </div>
                </div>
                <small id="locationInfo" style="color: var(--text-secondary); margin-top: 10px; display: block;">
                    Bonus: Argent Ã—1, XP Ã—1, Points Ã—1
                </small>
            </div>
            <div class="form-group">
                <label>ğŸ§¬ Talisman de clonage</label>
                <div class="toggle-container">
                    <label class="toggle">
                        <input type="checkbox" id="hasCloneTalisman">
                        <span class="toggle-slider"></span>
                    </label>
                    <span class="toggle-label">PossÃ¨de le talisman</span>
                </div>
            </div>
            <div class="form-group">
                <label>âœ¨ Bonus talisman sur l'expÃ©dition</label>
                <div class="toggle-container">
                    <label class="toggle">
                        <input type="checkbox" id="hasTalismanBonus">
                        <span class="toggle-slider"></span>
                    </label>
                    <span class="toggle-label">ExpÃ©dition avec bonus (x10)</span>
                </div>
                <small style="color: var(--text-secondary);">Chance: 1/20 si pas le talisman</small>
            </div>
            <div class="form-group">
                <label>ğŸ– Rations suffisantes</label>
                <div class="toggle-container">
                    <label class="toggle">
                        <input type="checkbox" id="hasEnoughFood" checked>
                        <span class="toggle-slider"></span>
                    </label>
                    <span class="toggle-label">Assez de nourriture</span>
                </div>
                <small style="color: var(--text-secondary);">Sans rations: risque x3</small>
            </div>
        </div>
        <button class="btn-simulate" id="simulateButton">ğŸš€ Simuler l'expÃ©dition</button>
    </div>

    <div id="resultsMount"></div>
</div>
