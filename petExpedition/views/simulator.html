<div class="card" id="dataLoadingCard">
    <h2>ğŸ“¦ Chargement des donnÃ©es</h2>
    <div class="form-group">
        <label>Branche GitHub</label>
        <div class="searchable-select-container">
            <input type="text" id="branchSearch" placeholder="Rechercher une branche..." autocomplete="off">
            <div class="dropdown-list" id="branchDropdown"></div>
        </div>
        <input type="hidden" id="selectedBranch" value="petexploration">
    </div>
    <button class="btn-simulate" id="loadButton">ğŸ”„ Charger les donnÃ©es des familiers</button>
    <div id="loadingStatus" style="margin-top: 15px; text-align: center;"></div>
</div>

<div class="tab-nav" id="tabNav" style="display: none;">
    <button class="tab-btn active" data-target="simulator">ğŸ§ª Simulateur</button>
    <button class="tab-btn" data-target="analyzer">ğŸ“ Analyseur</button>
</div>

<div class="tab-content active" id="tab-simulator">
    <div class="card" id="simulatorCard" style="display: none;">
        <h2>âš™ï¸ ParamÃ¨tres de l'expÃ©dition</h2>
        <div class="form-grid">
            <div class="form-group">
                <label>ğŸ¾ Familier</label>
                <div class="searchable-select-container">
                    <input type="text" id="petSearch" placeholder="Rechercher un familier..." autocomplete="off">
                    <div class="dropdown-list" id="petDropdown"></div>
                </div>
                <input type="hidden" id="selectedPetId" value="">
                <div id="selectedPetStats" class="stat-display" style="display: none;"></div>
                <!-- LÃ©gende des prÃ©fÃ©rences -->
                <div class="preferences-legend" style="margin-top: 8px; padding: 8px; background: var(--bg-tertiary); border-radius: var(--radius-sm); font-size: 0.8em;">
                    <div style="margin-bottom: 4px; color: var(--text-secondary); font-weight: 600;">ğŸ“‹ Effets des prÃ©fÃ©rences :</div>
                    <div style="display: flex; gap: 12px; flex-wrap: wrap;">
                        <span style="color: var(--success);">â¤ï¸ AimÃ©: -5% risque, 100% gains</span>
                        <span style="color: var(--text-secondary);">ğŸ¾ Neutre: 80% gains</span>
                        <span style="color: var(--danger);">ğŸ’” DÃ©testÃ©: +10% risque (<12h), 25% gains</span>
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <label>ğŸ—ºï¸ ExpÃ©dition</label>
                <div class="searchable-select-container">
                    <input type="text" id="expeditionSearch" placeholder="Rechercher une expÃ©dition (ex: RiviÃ¨re Vacarme)..." autocomplete="off">
                    <div class="dropdown-list expedition-dropdown" id="expeditionDropdown"></div>
                </div>
                <input type="hidden" id="selectedExpeditionId" value="">
                <input type="hidden" id="selectedExpeditionType" value="plains">
                <div id="expeditionInfo" class="expedition-info-display" style="display: none;"></div>
            </div>
            
            <div class="form-group">
                <label>ğŸ’• Points d'amour (20-110)</label>
                <div class="slider-container">
                    <input type="range" id="lovePoints" min="20" max="110" value="20" aria-label="Points d'amour du familier">
                    <span class="slider-value" id="loveValue">20</span>
                </div>
                <small id="loveMinHint" style="color: var(--warning);">Minimum requis: 20 points d'amour</small>
            </div>
            <div class="form-group">
                <label>â±ï¸ DurÃ©e de l'expÃ©dition (minutes)</label>
                <div class="slider-container">
                    <input type="range" id="duration" min="10" max="4320" value="120" step="10" aria-label="DurÃ©e de l'expÃ©dition en minutes">
                    <span class="slider-value" id="durationValue">2h</span>
                </div>
                <small style="color: var(--text-secondary);">10 min - 3 jours (4320 min)</small>
            </div>
            <div class="form-group">
                <label>âš ï¸ DangerositÃ© (0-100%)</label>
                <div class="slider-container">
                    <input type="range" id="riskRate" min="0" max="100" value="30" aria-label="DangerositÃ© de l'expÃ©dition">
                    <span class="slider-value" id="riskValue">30%</span>
                </div>
                <small id="riskCategory" style="color: var(--text-secondary);">CatÃ©gorie: Faible</small>
            </div>
            <div class="form-group">
                <label>ğŸ¯ DifficultÃ© du terrain (0-100)</label>
                <div class="slider-container">
                    <input type="range" id="difficulty" min="0" max="100" value="50" aria-label="DifficultÃ© du terrain">
                    <span class="slider-value" id="difficultyValue">50</span>
                </div>
                <small id="difficultyCategory" style="color: var(--text-secondary);">CatÃ©gorie: ModÃ©rÃ©e</small>
            </div>
            <div class="form-group">
                <label>ğŸ’ Taux de richesse (0.0-2.0)</label>
                <div class="slider-container">
                    <input type="range" id="wealthRate" min="0" max="200" value="100" aria-label="Taux de richesse de l'expÃ©dition">
                    <span class="slider-value" id="wealthValue">1.0</span>
                </div>
                <small id="wealthCategory" style="color: var(--text-secondary);">CatÃ©gorie: Modeste</small>
            </div>
            
            <!-- Bonus de l'expÃ©dition -->
            <div class="form-group full-width">
                <label>âš¡ Bonus de l'expÃ©dition</label>
                <div class="bonus-toggles">
                    <div class="form-group">
                        <div class="toggle-container">
                            <label class="toggle">
                                <input type="checkbox" id="hasTalismanBonus">
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="toggle-label">âœ¨ Bonus talisman (Ã—10)</span>
                        </div>
                        <small>Chance: 1/20 si pas le talisman</small>
                    </div>
                    <div class="form-group">
                        <div class="toggle-container">
                            <label class="toggle">
                                <input type="checkbox" id="hasTokenBonus">
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="toggle-label">ğŸª™ Bonus tokens (Ã—3)</span>
                        </div>
                        <small>Chance: 1/8</small>
                    </div>
                </div>
                <small style="margin-top: 8px; display: block;">âš ï¸ Ces deux bonus sont mutuellement exclusifs</small>
            </div>
            
            <!-- Options du joueur -->
            <div class="form-group">
                <label>ğŸ§¬ Talisman de clonage</label>
                <div class="toggle-container">
                    <label class="toggle">
                        <input type="checkbox" id="hasCloneTalisman">
                        <span class="toggle-slider"></span>
                    </label>
                    <span class="toggle-label">DÃ©jÃ  obtenu</span>
                </div>
                <small>Si cochÃ©, le score ne priorise plus le talisman</small>
            </div>
            <div class="form-group">
                <label>ğŸ– Rations suffisantes</label>
                <div class="toggle-container">
                    <label class="toggle">
                        <input type="checkbox" id="hasEnoughFood" checked>
                        <span class="toggle-slider"></span>
                    </label>
                    <span class="toggle-label">Assez de nourriture</span>
                </div>
                <small>Sans rations: risque Ã—3</small>
            </div>
        </div>
        <button class="btn-simulate" id="simulateButton">ğŸš€ Simuler l'expÃ©dition</button>
    </div>
</div>
