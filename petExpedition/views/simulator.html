<div class="card" id="dataLoadingCard">
    <h2>üì¶ Chargement des donn√©es</h2>
    <div class="form-group">
        <label>Branche GitHub</label>
        <div class="searchable-select-container">
            <input type="text" id="branchSearch" placeholder="Rechercher une branche..." autocomplete="off">
            <div class="dropdown-list" id="branchDropdown"></div>
        </div>
        <input type="hidden" id="selectedBranch" value="petexploration">
    </div>
    <button class="btn-simulate" id="loadButton">üîÑ Charger les donn√©es des familiers</button>
    <div id="loadingStatus" style="margin-top: 15px; text-align: center;"></div>
</div>

<div class="tab-nav" id="tabNav" style="display: none;">
    <button class="tab-btn active" data-target="simulator">üß™ Simulateur</button>
    <button class="tab-btn" data-target="analyzer">üìù Analyseur</button>
</div>

<div class="tab-content active" id="tab-simulator">
    <div class="card" id="simulatorCard" style="display: none;">
        <h2>‚öôÔ∏è Param√®tres de l'exp√©dition</h2>
        <div class="form-grid">
            <div class="form-group">
                <label>üêæ Familier</label>
                <div class="searchable-select-container">
                    <input type="text" id="petSearch" placeholder="Rechercher un familier..." autocomplete="off">
                    <div class="dropdown-list" id="petDropdown"></div>
                </div>
                <input type="hidden" id="selectedPetId" value="">
                <div id="selectedPetStats" class="stat-display" style="display: none;"></div>
            </div>
            
            <div class="form-group">
                <label>üó∫Ô∏è Exp√©dition</label>
                <div class="searchable-select-container">
                    <input type="text" id="expeditionSearch" placeholder="Rechercher une exp√©dition (ex: Rivi√®re Vacarme)..." autocomplete="off">
                    <div class="dropdown-list expedition-dropdown" id="expeditionDropdown"></div>
                </div>
                <input type="hidden" id="selectedExpeditionId" value="">
                <input type="hidden" id="selectedExpeditionType" value="plains">
                <div id="expeditionInfo" class="expedition-info-display" style="display: none;"></div>
            </div>
            
            <div class="form-group">
                <label>üíï Points d'amour (80-110)</label>
                <div class="slider-container">
                    <input type="range" id="lovePoints" min="80" max="110" value="80" aria-label="Points d'amour du familier">
                    <span class="slider-value" id="loveValue">80</span>
                </div>
                <small id="loveMinHint" style="color: var(--warning);">Minimum requis pour partir en exp√©dition</small>
            </div>
            <div class="form-group">
                <label>‚è±Ô∏è Dur√©e de l'exp√©dition (minutes)</label>
                <div class="slider-container">
                    <input type="range" id="duration" min="10" max="4320" value="120" step="10" aria-label="Dur√©e de l'exp√©dition en minutes">
                    <span class="slider-value" id="durationValue">2h</span>
                </div>
                <small style="color: var(--text-secondary);">10 min - 3 jours (4320 min)</small>
            </div>
            <div class="form-group">
                <label>‚ö†Ô∏è Dangerosit√© (0-100%)</label>
                <div class="slider-container">
                    <input type="range" id="riskRate" min="0" max="100" value="30" aria-label="Dangerosit√© de l'exp√©dition">
                    <span class="slider-value" id="riskValue">30%</span>
                </div>
                <small id="riskCategory" style="color: var(--text-secondary);">Cat√©gorie: Faible</small>
            </div>
            <div class="form-group">
                <label>üéØ Difficult√© du terrain (0-100)</label>
                <div class="slider-container">
                    <input type="range" id="difficulty" min="0" max="100" value="50" aria-label="Difficult√© du terrain">
                    <span class="slider-value" id="difficultyValue">50</span>
                </div>
                <small id="difficultyCategory" style="color: var(--text-secondary);">Cat√©gorie: Mod√©r√©e</small>
            </div>
            <div class="form-group">
                <label>üíé Taux de richesse (0.0-2.0)</label>
                <div class="slider-container">
                    <input type="range" id="wealthRate" min="0" max="200" value="100" aria-label="Taux de richesse de l'exp√©dition">
                    <span class="slider-value" id="wealthValue">1.0</span>
                </div>
                <small id="wealthCategory" style="color: var(--text-secondary);">Cat√©gorie: Modeste</small>
            </div>
            
            <!-- Bonus de l'exp√©dition -->
            <div class="form-group full-width">
                <label>‚ö° Bonus de l'exp√©dition</label>
                <div class="bonus-toggles">
                    <div class="form-group">
                        <div class="toggle-container">
                            <label class="toggle">
                                <input type="checkbox" id="hasTalismanBonus">
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="toggle-label">‚ú® Bonus talisman (√ó10)</span>
                        </div>
                        <small>Chance: 1/20 si pas le talisman</small>
                    </div>
                    <div class="form-group">
                        <div class="toggle-container">
                            <label class="toggle">
                                <input type="checkbox" id="hasTokenBonus">
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="toggle-label">ü™ô Bonus tokens (√ó3)</span>
                        </div>
                        <small>Chance: 1/8</small>
                    </div>
                </div>
                <small style="margin-top: 8px; display: block;">‚ö†Ô∏è Ces deux bonus sont mutuellement exclusifs</small>
            </div>
            
            <!-- Options du joueur -->
            <div class="form-group">
                <label>üß¨ Talisman de clonage</label>
                <div class="toggle-container">
                    <label class="toggle">
                        <input type="checkbox" id="hasCloneTalisman">
                        <span class="toggle-slider"></span>
                    </label>
                    <span class="toggle-label">D√©j√† obtenu</span>
                </div>
                <small>Si coch√©, le score ne priorise plus le talisman</small>
            </div>
            <div class="form-group">
                <label>üçñ Rations suffisantes</label>
                <div class="toggle-container">
                    <label class="toggle">
                        <input type="checkbox" id="hasEnoughFood" checked>
                        <span class="toggle-slider"></span>
                    </label>
                    <span class="toggle-label">Assez de nourriture</span>
                </div>
                <small>Sans rations: risque √ó3</small>
            </div>
        </div>
        <button class="btn-simulate" id="simulateButton">üöÄ Simuler l'exp√©dition</button>
    </div>

    <div id="resultsMount"></div>
</div>
