<div class="tab-content" id="tab-analyzer">
    <div class="card">
        <h2>ğŸ“ Analyseur d'expÃ©dition</h2>
        <p style="color: var(--text-secondary); margin-bottom: 20px;">
            Entrez les informations affichÃ©es par Discord pour calculer les probabilitÃ©s et ranges de rÃ©compenses.
        </p>
        
        <div class="form-grid">
            <!-- Familier -->
            <div class="form-group">
                <label>ğŸ¾ Familier</label>
                <div class="searchable-select-container">
                    <input type="text" id="analyzerPetSearch" placeholder="Rechercher un familier..." class="searchable-input" autocomplete="off">
                    <input type="hidden" id="analyzerSelectedPetId" value="">
                    <div class="dropdown-list" id="analyzerPetDropdown"></div>
                </div>
                <div id="analyzerSelectedPetStats" class="stat-display" style="display: none;"></div>
            </div>
            
            <!-- ExpÃ©dition -->
            <div class="form-group">
                <label>ğŸ—ºï¸ ExpÃ©dition</label>
                <div class="searchable-select-container">
                    <input type="text" id="analyzerExpeditionSearch" placeholder="Rechercher une expÃ©dition..." class="searchable-input" autocomplete="off">
                    <div class="dropdown-list expedition-dropdown" id="analyzerExpeditionDropdown"></div>
                </div>
                <input type="hidden" id="analyzerSelectedExpeditionId" value="">
                <input type="hidden" id="analyzerSelectedExpeditionType" value="plains">
                <div id="analyzerExpeditionInfo" class="expedition-info-display" style="display: none;"></div>
            </div>
            
            <!-- Points d'amour -->
            <div class="form-group">
                <label>ğŸ’• Points d'amour (20-110)</label>
                <div class="slider-container">
                    <input type="range" id="analyzerLovePoints" min="20" max="110" value="20" aria-label="Points d'amour du familier pour l'analyse">
                    <span class="slider-value" id="analyzerLoveValue">20</span>
                </div>
                <small id="analyzerLoveMinHint" style="color: var(--warning);">Minimum requis: 20 points d'amour</small>
            </div>
            
            <!-- DurÃ©e estimÃ©e -->
            <div class="form-group">
                <label>â±ï¸ DurÃ©e estimÃ©e</label>
                <input type="text" id="analyzerDuration" placeholder="Ex: 2h30, 45min, 1j12h" value="2h">
                <small style="color: var(--text-secondary);">Format: Xh, Xmin, XhYmin, Xj, XjYh</small>
            </div>
            
            <!-- DangerositÃ© (8 catÃ©gories officielles) -->
            <div class="form-group">
                <label>âš ï¸ DangerositÃ©</label>
                <select id="analyzerRisk">
                    <option value="trivial">ğŸŒ¿ Tranquille (0-10%)</option>
                    <option value="veryLow">â˜€ï¸ Serein (11-20%)</option>
                    <option value="low">ğŸŒ¤ï¸ Hasardeux (21-32%)</option>
                    <option value="moderate" selected>âš¡ RisquÃ© (33-45%)</option>
                    <option value="high">ğŸ”¥ Dangereux (46-58%)</option>
                    <option value="veryHigh">âš ï¸ PÃ©rilleux (59-72%)</option>
                    <option value="extreme">ğŸ’€ Mortel (73-86%)</option>
                    <option value="desperate">âš°ï¸ DÃ©sespÃ©rÃ© (87-100%)</option>
                </select>
            </div>
            
            <!-- DifficultÃ© du terrain -->
            <div class="form-group">
                <label>ğŸ¯ DifficultÃ© du terrain</label>
                <select id="analyzerDifficulty">
                    <option value="trivial">â­ AisÃ© (0-20)</option>
                    <option value="easy">â­â­ Accessible (21-40)</option>
                    <option value="moderate" selected>â­â­â­ Exigeant (41-60)</option>
                    <option value="challenging">â­â­â­â­ Ardu (61-80)</option>
                    <option value="treacherous">â­â­â­â­â­ Impitoyable (81-100)</option>
                </select>
            </div>
            
            <!-- RÃ©compenses estimÃ©es -->
            <div class="form-group">
                <label>ğŸ RÃ©compenses estimÃ©es</label>
                <select id="analyzerReward">
                    <option value="meager">ğŸ’¸ Maigres</option>
                    <option value="modest">ğŸ’µ Modestes</option>
                    <option value="substantial" selected>ğŸ’° Correctes</option>
                    <option value="bountiful">ğŸ’ Abondantes</option>
                    <option value="legendary">ğŸ‘‘ Exceptionnelles</option>
                </select>
            </div>
            
            <!-- Rations requises -->
            <div class="form-group">
                <label>ğŸ– Rations requises</label>
                <select id="analyzerFood">
                    <option value="0">1 ration</option>
                    <option value="1">3 rations</option>
                    <option value="2">5 rations</option>
                    <option value="3">6 rations</option>
                    <option value="4">8 rations</option>
                    <option value="5" selected>10 rations</option>
                    <option value="6">12 rations</option>
                    <option value="7">15 rations</option>
                    <option value="8">25 rations</option>
                    <option value="9">32 rations</option>
                </select>
            </div>
            
            <!-- Bonus de l'expÃ©dition -->
            <div class="form-group full-width">
                <label>âš¡ Bonus de l'expÃ©dition</label>
                <div class="bonus-toggles">
                    <div class="form-group">
                        <div class="toggle-container">
                            <label class="toggle">
                                <input type="checkbox" id="analyzerTalismanBonus">
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="toggle-label">âœ¨ Bonus talisman (Ã—10)</span>
                        </div>
                        <small>Message spÃ©cial Discord</small>
                    </div>
                    <div class="form-group">
                        <div class="toggle-container">
                            <label class="toggle">
                                <input type="checkbox" id="analyzerTokenBonus">
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="toggle-label">ğŸª™ Bonus tokens (Ã—3)</span>
                        </div>
                        <small>Mutuellement exclusif</small>
                    </div>
                </div>
            </div>
        </div>
        
        <button class="btn-simulate" id="analyzeButton">ğŸ” Analyser</button>
    </div>
    
    <!-- RÃ©sultats avec structure similaire au simulateur -->
    <div id="analyzerResults" class="results-container" style="display: none;">
        <!-- Header avec rÃ©sumÃ© rapide -->
        <div class="results-header card">
            <div class="results-header-content">
                <h2>ğŸ“Š RÃ©sultats de l'analyse</h2>
                <div id="analyzerQuickSummary" class="quick-summary"></div>
            </div>
            <div id="analyzerScoreDisplay" class="score-display-compact"></div>
        </div>

        <!-- Navigation par onglets -->
        <div class="results-tabs">
            <button class="results-tab active" data-tab="analyzer-overview">ğŸ“‹ AperÃ§u</button>
            <button class="results-tab" data-tab="analyzer-rewards">ğŸ RÃ©compenses</button>
            <button class="results-tab" data-tab="analyzer-params">ğŸ“ ParamÃ¨tres</button>
        </div>

        <!-- Contenu des onglets -->
        <div class="results-tab-content">
            <!-- Onglet AperÃ§u -->
            <div class="tab-panel active" id="panel-analyzer-overview">
                <div class="overview-grid">
                    <!-- ProbabilitÃ©s de rÃ©sultat avec barre -->
                    <div class="card overview-card">
                        <h3>ğŸ“Š Taux de rÃ©ussite (cas moyen)</h3>
                        <div class="progress-container">
                            <div class="progress-bar">
                                <div class="progress-segment progress-success" id="analyzerProgressSuccess"></div>
                                <div class="progress-segment progress-partial" id="analyzerProgressPartial"></div>
                                <div class="progress-segment progress-failure" id="analyzerProgressFailure"></div>
                            </div>
                            <div class="progress-legend">
                                <div class="legend-item">
                                    <div class="legend-color" style="background: #22c55e;"></div>
                                    <span>SuccÃ¨s total (<span id="analyzerLegendSuccess">0</span>%)</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-color" style="background: #f59e0b;"></div>
                                    <span>SuccÃ¨s partiel (<span id="analyzerLegendPartial">0</span>%)</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-color" style="background: #dc2626;"></div>
                                    <span>Ã‰chec (<span id="analyzerLegendFailure">0</span>%)</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Score de rentabilitÃ© cas moyen -->
                    <div class="card overview-card">
                        <h3>ğŸ“ˆ RentabilitÃ© (cas moyen)</h3>
                        <div id="analyzerProfitabilityScoreAvg"></div>
                    </div>

                    <!-- Changements d'amour -->
                    <div class="card overview-card full-width">
                        <h3>ğŸ’• Changement d'amour selon issue</h3>
                        <div class="love-change-grid compact">
                            <div class="love-change-item">
                                <span class="love-icon">âœ…</span>
                                <span class="love-label">SuccÃ¨s</span>
                                <span class="love-value positive">+5</span>
                            </div>
                            <div class="love-change-item">
                                <span class="love-icon">âš ï¸</span>
                                <span class="love-label">Partiel</span>
                                <span class="love-value neutral">0</span>
                            </div>
                            <div class="love-change-item">
                                <span class="love-icon">âŒ</span>
                                <span class="love-label">Ã‰chec</span>
                                <span class="love-value negative">-10</span>
                            </div>
                            <div class="love-change-item">
                                <span class="love-icon">ğŸ”™</span>
                                <span class="love-label">Rappel</span>
                                <span class="love-value negative">-25</span>
                            </div>
                            <div class="love-change-item">
                                <span class="love-icon">ğŸš«</span>
                                <span class="love-label">Annul.</span>
                                <span class="love-value negative" id="analyzerCancelLoveChange">-15</span>
                            </div>
                        </div>
                    </div>

                    <!-- ScÃ©narios dÃ©taillÃ©s -->
                    <div class="card overview-card full-width">
                        <h3>ğŸ² ScÃ©narios selon risque/difficultÃ©</h3>
                        <div id="analyzerScenarios"></div>
                    </div>
                    
                    <!-- Scores par cas -->
                    <div class="card overview-card full-width">
                        <h3>ğŸ“ˆ RentabilitÃ© par scÃ©nario</h3>
                        <div id="analyzerProfitabilityScore"></div>
                        <div class="info-box compact" style="margin-top: 12px;">
                            <p style="font-size: 0.85em; color: var(--text-secondary);">
                                Score = SuccÃ¨s(35%) + Index(35%) + Talisman(15%) + Tokens(10%) + Temps(5%)
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Onglet RÃ©compenses -->
            <div class="tab-panel" id="panel-analyzer-rewards">
                <div class="card">
                    <h3>ğŸ RÃ©compenses possibles</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 15px;">
                        BasÃ© sur l'index de rÃ©compense dÃ©duit des rations (<span id="deducedRewardIndex">?</span>)
                    </p>
                    <div id="rewardRanges"></div>
                </div>
            </div>

            <!-- Onglet ParamÃ¨tres -->
            <div class="tab-panel" id="panel-analyzer-params">
                <div class="card">
                    <h3>ğŸ“Š Analyse des paramÃ¨tres</h3>
                    <div id="parameterRanges"></div>
                </div>
                
                <div class="card">
                    <h3>ğŸ“‹ CohÃ©rence des donnÃ©es</h3>
                    <div id="consistencyCheck"></div>
                </div>
            </div>
        </div>
    </div>
</div>
